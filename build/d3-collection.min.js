// https://d3js.org/d3-collection/ Version 1.0.4. Copyright 2018 Mike Bostock.
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.d3=n.d3||{})}(this,function(n){"use strict";var e="$";function s(){}function m(n,t){var e=new s;if(n instanceof s)n.each(function(n,t){e.set(t,n)});else if(Array.isArray(n)){var r,i=-1,u=n.length;if(null==t)for(;++i<u;)e.set(i,n[i]);else for(;++i<u;)e.set(t(r=n[i],i,n),r)}else if(n)for(var o in n)e.set(o,n[o]);return e}s.prototype=m.prototype={constructor:s,has:function(n){return e+n in this},get:function(n){return this[e+n]},set:function(n,t){return this[e+n]=t,this},remove:function(n){var t=e+n;return t in this&&delete this[t]},clear:function(){for(var n in this)n[0]===e&&delete this[n]},keys:function(){var n=[];for(var t in this)t[0]===e&&n.push(t.slice(1));return n},values:function(){var n=[];for(var t in this)t[0]===e&&n.push(this[t]);return n},entries:function(){var n=[];for(var t in this)t[0]===e&&n.push({key:t.slice(1),value:this[t]});return n},size:function(){var n=0;for(var t in this)t[0]===e&&++n;return n},empty:function(){for(var n in this)if(n[0]===e)return!1;return!0},each:function(n){for(var t in this)t[0]===e&&n(this[t],t.slice(1),this)}};function r(){return{}}function i(n,t,e){n[t]=e}function u(){return m()}function f(n,t,e){n.set(t,e)}function o(){}var t=m.prototype;function c(n,t){var e=new o;if(n instanceof o)n.each(function(n){e.add(n)});else if(n){var r=-1,i=n.length;if(null==t)for(;++r<i;)e.add(n[r]);else for(;++r<i;)e.add(t(n[r],r,n))}return e}o.prototype=c.prototype={constructor:o,has:t.has,add:function(n){return this[e+(n+="")]=n,this},remove:t.remove,clear:t.clear,values:t.keys,size:t.size,empty:t.empty,each:t.each};n.nest=function(){var v,p,t,y=[],o=[];function d(n,e,r,i){if(e>=y.length)return null!=v&&n.sort(v),null!=p?p(n):n;var t,u,o,s=-1,f=n.length,c=y[e++],a=m(),h=r();function l(n){(o=a.get(n+""))?o.push(u):a.set(n,[u])}for(;++s<f;)t=c(u=n[s]),Array.isArray(t)?t.map(l):l(t);return a.each(function(n,t){i(h,t,d(n,e,r,i))}),h}return t={object:function(n){return d(n,0,r,i)},map:function(n){return d(n,0,u,f)},entries:function(n){return function e(n,r){if(++r>y.length)return n;var i,u=o[r-1];return null!=p&&r>=y.length?i=n.entries():(i=[],n.each(function(n,t){i.push({key:t,values:e(n,r)})})),null!=u?i.sort(function(n,t){return u(n.key,t.key)}):i}(d(n,0,u,f),0)},key:function(n){return y.push(n),t},sortKeys:function(n){return o[y.length-1]=n,t},sortValues:function(n){return v=n,t},rollup:function(n){return p=n,t}}},n.set=c,n.map=m,n.keys=function(n){var t=[];for(var e in n)t.push(e);return t},n.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},n.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},Object.defineProperty(n,"__esModule",{value:!0})});